<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BATTLE OF SNIPER - Season 6 Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="https://unpkg.com/lucide@latest"></script>
    
    <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .registration-card input {
      background-color: rgba(0, 0, 0, 0.5);  /* semi-dark input fields */
      border: 1px solid rgba(0, 255, 255, 0.3);
    }

    .registration-card input:focus {
      background-color: rgba(0, 0, 0, 0.7);
      border-color: cyan;
    }


    /* ✅ Fixed Background Image Path */
    .background-overlay {
      background-image: 
        linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9)),
        url('image1.jpg'); /* <-- Your uploaded image, same folder as index.html */
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-color: #1a1a1a;
      min-height: 100vh;
    }

    @media (max-width: 768px) {
      .background-overlay {
        background-attachment: scroll;
      }
    }

    .registration-card {
      max-width: 90%;
      width: 450px;
    }

  .game-header {
      font-size: clamp(2rem, 8vw, 3.5rem);
      letter-spacing: 2px;
      color: #00eaff; /* brighter cyan for better visibility */
      text-shadow: 
        0 0 6px rgba(0, 255, 255, 0.6),
        0 0 12px rgba(0, 255, 255, 0.5),
        0 2px 6px rgba(0, 0, 0, 0.8); /* subtle black shadow for contrast */
      line-height: 1.1;
  }


    .registration-card {
      color: #f0f8ff; /* a bit brighter white */
    }

    .registration-card {
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.15);
    }

  </style>
</head>
<body class="background-overlay min-h-screen flex items-center justify-center p-4">

    <div id="toast" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 p-4 rounded-lg shadow-xl text-white flex items-center z-50 transition-all duration-300 opacity-0 invisible pointer-events-none">
        </div>

    <div class="registration-card bg-transparent rounded-xl shadow-lg p-6 md:p-10 space-y-8">
        
        <header class="text-center mb-6">
            <h1 class="game-header font-extrabold text-cyan-400 uppercase">
                BATTLE OF SNIPER
            </h1>
            <p class="text-xl font-medium text-gray-300 border-b border-gray-700 pb-2">SEASON 6 REGISTRATION</p>
        </header>

        <form id="registrationForm" onsubmit="submitRegistration(event)" class="space-y-6">
            
            <div>
                <label for="fullName" class="block text-sm font-medium text-gray-300 mb-2">Full Name</label>
                <div class="relative">
                    <i data-lucide="user" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-cyan-500"></i>
                    <input type="text" id="fullName" name="userName" placeholder="Your Full Name (e.g., John Doe)" required 
                           class="w-full bg-gray-800 text-white border border-gray-700 rounded-lg py-3 pl-10 pr-4 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150 shadow-inner">
                </div>
            </div>
            
            <div>
                <label for="teamName" class="block text-sm font-medium text-gray-300 mb-2">Team Name</label>
                <div class="relative">
                    <i data-lucide="users" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-cyan-500"></i>
                    <input type="text" id="teamName" name="teamName" placeholder="Your Squad/Team Name" required 
                           class="w-full bg-gray-800 text-white border border-gray-700 rounded-lg py-3 pl-10 pr-4 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150 shadow-inner">
                </div>
            </div>

            <div>
                <label for="gameUID" class="block text-sm font-medium text-gray-300 mb-2">Game UID (ID Number)</label>
                <div class="relative">
                    <i data-lucide="gamepad-2" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-cyan-500"></i>
                    <input type="tel" id="gameUID" name="UID" inputmode="numeric" placeholder="Enter your 8-12 digit Game ID" required 
                           class="w-full bg-gray-800 text-white border border-gray-700 rounded-lg py-3 pl-10 pr-4 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150 shadow-inner">
                </div>
            </div>
            
            <div>
                <label for="contactNumber" class="block text-sm font-medium text-gray-300 mb-2">Contact Number</label>
                <div class="relative">
                    <i data-lucide="phone" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-cyan-500"></i>
                    <input type="tel" id="contactNumber" name="contactNumber" inputmode="numeric" pattern="[0-9]{10}" maxlength="10" title="Enter exactly 10 digits" placeholder="10-digit mobile number for contact" required 
                           class="w-full bg-gray-800 text-white border border-gray-700 rounded-lg py-3 pl-10 pr-4 focus:ring-cyan-500 focus:border-cyan-500 transition duration-150 shadow-inner">
                </div>
            </div>
            
            <button type="submit" id="submit-btn" 
                    class="w-full flex items-center justify-center bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 rounded-xl transition duration-300 uppercase tracking-widest shadow-lg shadow-cyan-500/50 transform hover:scale-[1.01] active:scale-[0.99] disabled:bg-gray-600 disabled:shadow-none disabled:cursor-not-allowed">
                <i data-lucide="send" class="w-5 h-5 mr-2"></i>
                Confirm Registration
            </button>
            
        </form>

        <section class="mt-8 pt-6 border-t border-gray-700 text-center">
            <p class="text-sm text-gray-400 mb-4">
                All tournament rules, updates, and schedule changes will be shared in the official WhatsApp group.
            </p>
            
            <a href="https://chat.whatsapp.com/BxeGhVzB6M7K7gH2Isd93s?mode=wwt" target="_blank" rel="noopener noreferrer" 
               class="inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full transition duration-300 shadow-md shadow-green-500/50 transform hover:scale-105 active:scale-95">
                <i data-lucide="message-square" class="w-5 h-5 mr-2 fill-white"></i>
                Join WhatsApp Group
            </a>
        </section>

    </div>
    
    <script>
        // Custom Toast/Notification Function 
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            
            let colorClass = '';
            let iconHtml = '';

            const iconMap = {
                success: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle w-5 h-5 mr-2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>',
                error: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle w-5 h-5 mr-2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>',
                info: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info w-5 h-5 mr-2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>'
            };

            if (type === 'success') {
                colorClass = 'bg-green-600';
                iconHtml = iconMap.success;
            } else if (type === 'error') {
                colorClass = 'bg-red-600';
                iconHtml = iconMap.error;
            } else {
                colorClass = 'bg-blue-600';
                iconHtml = iconMap.info;
            }

            toast.className = `fixed bottom-5 left-1/2 transform -translate-x-1/2 p-4 rounded-lg shadow-xl text-white flex items-center z-50 transition-all duration-300 ${colorClass}`;
            toast.innerHTML = iconHtml + message;
            toast.style.opacity = '1';
            toast.style.visibility = 'visible'; 

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.visibility = 'hidden';
            }, 5000);
        }
        
        // FIX: NEW FUNCTION for AJAX submission, pop-up, and page refresh
        async function submitRegistration(event) {
            event.preventDefault(); // Stop the default form navigation

            const form = document.getElementById('registrationForm');
            const submitButton = document.getElementById('submit-btn');
            
            // Your backend Web Service URL (Based on your screenshots)
            const BACKEND_URL = "https://registrations1.onrender.com/register";
            
            // Prepare the data to be sent (must match the form field names: userName, teamName, UID, contactNumber)
            const formData = new URLSearchParams(new FormData(form)).toString();

            submitButton.disabled = true;
            submitButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader w-5 h-5 mr-2 animate-spin"><path d="M12 2v4"/><path d="m16.2 16.2 3.4 3.4"/><path d="M2 12h4"/><path d="m4.9 4.9 3.4 3.4"/><path d="M12 22v-4"/><path d="m19.1 19.1-3.4-3.4"/><path d="M22 12h-4"/><path d="m19.1 4.9-3.4 3.4"/></svg> Processing...';

            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: formData,
                });

                if (response.ok) { // response.ok means status 200-299 (which the server now sends)
                    // SUCCESS: Show pop-up
                    showToast("✅ Registration Successful! Refreshing page...", 'success');
                    
                    // Wait 3 seconds for the user to see the message, then reload the page
                    setTimeout(() => {
                        window.location.reload(); 
                    }, 3000); 

                } else {
                    // ERROR: Show server error message
                    showToast(`❌ Registration Failed. Server Status: ${response.status}. Check console for details.`, 'error');
                }

            } catch (error) {
                showToast("❌ Network Error. Could not connect to the backend server.", 'error');
                console.error(error);
            } finally {
                // Restore button state only if we failed or hit a network error (not on success)
                if (!response || !response.ok) { 
                    submitButton.disabled = false;
                    submitButton.innerHTML = '<i data-lucide="send" class="w-5 h-5 mr-2"></i> Confirm Registration';
                    if (typeof lucide !== 'undefined') { lucide.createIcons(); }
                }
            }
        }

        // Load Lucide icons on page load
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>
